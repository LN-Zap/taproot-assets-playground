#!/usr/bin/env bash

tmpfile=$(mktemp)
docker exec taproot-assets-playground-${1}-1 litcli \
    --network=regtest \
    --rpcserver=localhost:8443 \
    --tlscertpath=/root/.lit/tls.cert  \
    --macaroonpath=/root/.lit/regtest/lit.macaroon \
    "${@:2}" > $tmpfile 2>&1
status=$?
output=$(< $tmpfile)
rm $tmpfile

if [ $status -ne 0 ]; then
    echo "$output"
    exit 1
else
    echo "$output"
fi